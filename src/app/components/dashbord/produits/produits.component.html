<app-boxclient #header></app-boxclient>

<div class="dashboard-contener">

    <div class="row">
        <div class="menu_gauche">
            <div class="menu_content">


                <div class="menu_aller_au_site" title="Revenir au site de commerce" [routerLink]="['/home/']">
                    <span class="material-icons">
                        store
                    </span>
                    <span class="label_aller_au_site">
                        Aller au site
                    </span>
                </div>
                <div class="menu_produits active_menu" [routerLink]="['/dashboard/produits']">
                    Produits
                </div>
                <div class="menu_produits" [routerLink]="['/dashboard/users']">
                    Utilisateurs
                </div>
                <div class="menu_produits" [routerLink]="['/dashboard/commandes']">
                    Commandes
                </div>
                <div class="menu_produits">
                    Reporting
                </div>
                <div class="menu_produits">
                    K.P.I
                </div>
                <div class="menu_produits">
                    Feedbacks
                </div>
                <div class="menu_produits">
                    Historique des recherches
                </div>
                <div class="menu_produits">
                    Logs
                </div>

            </div>
        </div>

        <div class="list_centre">
            <!-- <div>
                <input type="text" placeholder="Rechercher">
            </div> -->
            <div class="content_dans_list" id="content_dans_list"
                [ngStyle]="{'height': isEtireListe == false ? '70%' : '100%'}">
                <div class="menu_dans_list">

                    <p class="titleItem">
                        Produits
                    </p>

                    <button class="btn_creer" (click)="createProduit()" title="Créer un nouveau produit"
                        [disabled]="createType">
                        <span class="material-icons add_produit_icon">
                            add
                        </span>
                        Créer un nouveau
                    </button>


                    <div class="categorieItem">
                        Les catégories
                        <mat-icon matTooltip="Modifier/supprimer une catégorie" (click)="isEditedBtn()"
                        style="font-size: 15px; float:right; margin-top:5px;">edit</mat-icon>
                        <span class="buttonAddCategorie" title="Ajouter une categorie"
                            (click)="afficherCategorieCreate()" style="font-size: 15px;">+</span>
                    </div>

                    <div class="categorieCreerBox" *ngIf="showCategorieCreate">
                        <div class="titleAddCategorie">
                            Ajouter une categorie
                        </div>
                        <div>
                            Nom<br>
                            <input type="text" class="inputCategorie" id="nom" (mouseenter)="enterNom()" (mouseleave)="leaveNom()" [(ngModel)]="categorie.nom">
                            Description<br>
                            <textarea name="" id="description" class="inputCategorie"  (mouseenter)="enterDescri()" (mouseleave)="leaveDescri()"
                             [(ngModel)]="categorie.description"></textarea>
                        </div>
                        <div>
                            <button class="btnAddCategorie" (click)="addCategorie()">Ajouter</button>
                            <button class="btnAnnulerCategorie" (click)="hideOverlay()">Annuler</button>
                        </div>
                    </div>
                    <div class="categorieCreerBox" *ngIf="showCategorieEdit">
                        <div class="titleAddCategorie">
                            Catégorie
                        </div>
                        <div>
                            Nom<br>
                            <input type="text" class="inputCategorie" id="nom" (mouseenter)="enterNomEdit()" (mouseleave)="leaveNomEdit()" [(ngModel)]="categorie.nom" >
                            Description<br>
                            <textarea name="" id="description" class="inputCategorie" (mouseenter)="enterDescriEdit()" (mouseleave)="leaveDescriEdit()"
                            [(ngModel)]="categorie.description"></textarea>
                        </div>
                        <div>
                            <button class="btnAddCategorie" (click)="updateCategorie()">Modifier</button>
                            <button class="btnAnnulerCategorie" (click)="hideOverlay()">Annuler</button>
                        </div>
                    </div>

                    <p class="menu_item">
                        Tout
                        <span class="compte_produit" title="Nombre de tout les produits dans la base">
                            15/2541
                        </span>
                    </p>
                    <p class="menu_item" *ngFor="let c of allCategorie; let i=index">
                        <!-- on-mouseover="hoveredIndex=i" -->
                        <span *ngIf="!isEdited">{{c.nom}}</span> <span *ngIf="isEdited" (click)="editCategorie(c,i)">{{c.nom}}</span>
                        <span class="compte_produit">
                           <span *ngIf="!isEdited">654</span> <span *ngIf="isEdited" (click)="deleteCategorie(c._id, i)"><mat-icon style="color: red; font-size:20px;"
                            matTooltip="Delete categorie">delete</mat-icon></span>
                        </span>
                        <!-- <span class="menu_icon"><mat-icon (click)="editCategorie(c._id,i)">edit</mat-icon></span> -->
                    </p>
                    

                </div>


                <div class="list_dans_list">

                    <div class="filter" [ngStyle]="{'background-color':showFilter===true ? '#fafafa' : 'lightgrey'}">
                        <button class="btn_filter" (click)="afficherFiltre()" title="Filtrer les resultats">
                            <span class="material-icons">
                                sort
                            </span>
                        </button>
                    </div>

                    <div class="filter_content" *ngIf="showFilter">
                        <input type="text" name="search" [(ngModel)]="searchText" class="input_filter"
                            placeholder="Filtrer par nom...">

                        <p class="title_filter">Choisissez votre filtre</p>
                        <hr class="hr_filtre">
                        <input type="radio" id="none" name="filtre" value="none" (change)="changefiltre($event)">
                        <label for="none" class="item_filtre" title="Pas de filtre">Aucun</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="prix_asc" name="filtre" value="prix_asc"
                            (change)="changefiltre($event)">
                        <label for="prix_asc" class="item_filtre" title="De moins chèr au plus chèr">Prix
                            ascendant</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="prix_desc" name="filtre" value="prix_desc"
                            (change)="changefiltre($event)">
                        <label for="prix_desc" class="item_filtre" title="De plus chèr au moins chèr">Prix
                            descendant</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="vote_asc" name="filtre" value="vote_asc"
                            (change)="changefiltre($event)">
                        <label for="vote_asc" class="item_filtre" title="De plus de vote au moins de vote">Vote
                            ascendant</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="vote_desc" name="filtre" value="prix_desc"
                            (change)="changefiltre($event)">
                        <label for="vote_desc" class="item_filtre" title="De moins de vote au plus de vote">Vote
                            descendant</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="sandbox" name="filtre" value="sandbox" (change)="changefiltre($event)">
                        <label for="sandbox" class="item_filtre" title="">sandbox</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="live" name="filtre" value="live" (change)="changefiltre($event)">
                        <label for="live" class="item_filtre" title="">live</label>
                        <hr class="hr_filtre">
                        <input type="radio" id="archived" name="filtre" value="archived"
                            (change)="changefiltre($event)">
                        <label for="archived" class="item_filtre" title="">archived</label>
                        <hr class="hr_filtre">
                    </div>

                    <div class="selectionner">
                        <label class="container" style="font-size: small;" title="Basculer selection simple/multiple">
                            {{oneAndAll == true ? 'Cocher' : 'Décocher' }}
                            <input type="checkbox" (click)="toggleOneAndAll()">
                            <span class="checkmark"></span>
                        </label>
                    </div>

                    <div class="recherche_box">
                        <input type="text" placeholder="Rechercher produit.." class="input_search">
                        <button class="btn_search">
                            Rechercher
                        </button>
                    </div>


                    <div class="contenu_element" (scroll)="scrolled()" id="element">
                        <ngx-spinner [name]="spinner_list_Produit" [fullScreen]="false" [type]="spinner_type"
                            [size]="spinner_size" [bdColor]="spinner_background"></ngx-spinner>



                        <div *ngIf="oneAndAll">
                            <button class="element_un animate__animated animate__fadeIn"
                                *ngFor="let p of produits | filter:searchText ; let i=index"
                                title="Click droite pour l'option" id="one_{{p._id}}"
                                [ngStyle]="{'border': p._id == oneProduit._id ? '1px solid cornflowerblue' : '', 'background-color': p.select == true ? 'rgb(240 250 255)' : ''}"
                                (click)="getOneProduit(p,i); onClickWithControllPressed($event,p,i);"
                                (contextmenu)="onRightClick($event,'produit');getOneProduit(p,i);"
                                (keydown.Delete)="oneProduit.etat == 'archived' || oneProduit.etat == 'sandbox' ? deleteProduct() : false"
                                (keydown.Enter)="launchOrArhiveOrDelete()" (keydown.ArrowRight)="deplacerDroite()"
                                (keydown.ArrowLeft)="deplacerGauche()" (keydown.ArrowUp)="deplacerHaut()"
                                (keydown.Control.c)="copierProduit()" (keydown.Control.v)="collerProduit()" (keydown.e)="editProduit()"
                                (keydown.ArrowDown)="deplacerBas()" (dblclick)="launchOrArhiveOrDelete()" (keydown.Control.i)="oneProduit.images.length != 3 ? file.click() : false">
                                <img *ngIf="p.images.length != 0"
                                    src="http://localhost:3000/produits/getImage/{{p.images[0]}}-miniature.png"
                                    class="imageMiniature">
                                <img *ngIf="p.images.length == 0" src="../../../../assets/images/your-logo-png-8.png"
                                    class="imageMiniature">
                                <span class="title_produit_list" [title]="p.titre">
                                    {{p.titre}}
                                </span>
                                <span class="state_produit_on_list" [title]="p.etat"
                                    [ngStyle]="{'color': p.etat === 'live' ? 'green' : p.etat === 'sandbox' ? 'orange' : 'red'}">
                                    {{p.etat}}
                                </span>
                            </button>
                        </div>
                        <div *ngIf="!oneAndAll">
                            <button class="element_un_check" *ngFor="let p of produits | filter:searchText"
                                title="{{p.title}}" [ngStyle]="{'opacity': p.etat!=state_to_change ? '0.5' : '1'}"
                                (keydown.control.a)="selectionnerTout($event)"
                                (keydown.control.d)="deselectionnerTout($event)">
                                <input type="checkbox" class="checkCase" name="" check="true" id="{{p._id}}"
                                    [disabled]="p.etat!=state_to_change" (click)="selectProduit(p);"
                                    title="Cocher ici pour selection le produit"
                                    (keydown.control.a)="selectionnerTout($event)"
                                    (keydown.control.d)="deselectionnerTout($event)">
                                <img *ngIf="p.images.length != 0"
                                    src="http://localhost:3000/produits/getImage/{{p.images[0]}}-miniature.png"
                                    class="imageMiniature">
                                <img *ngIf="p.images.length == 0" src="../../../../assets/images/your-logo-png-8.png"
                                    class="imageMiniature">
                                <span class="title_produit_list">
                                    {{p.titre}}
                                </span>
                                <span class="state_produit_on_list" title="Etats du produit"
                                    [ngStyle]="{'color': p.etat === 'live' ? 'green' : p.etat === 'sandbox' ? 'orange' : 'red'}">
                                    {{p.etat}}
                                </span>
                            </button>
                        </div>

                    </div>

                    <div class="loadMore" *ngIf="loadMore">
                        <ngx-spinner [name]="spinner_loadMore" [fullScreen]="false" type="line-scale" size="5px"
                            [bdColor]="spinner_background">
                        </ngx-spinner>
                    </div>

                </div>
            </div>
            <!-- Peut etre statistic, nombre de vote, nombre de favorie, nombre de commande fais, sns -->
            <span (click)="isEtireListe = isEtireListe == false ? true : false" class="material-icons iconEtirer"
                [title]="isEtireListe == true ? 'Montrer le bloc' : 'Cacher le bloc'">
                {{isEtireListe == true ? 'expand_less' : 'expand_more' }}
            </span>
            <div class="content_stat_image" [ngStyle]="{'height': isEtireListe == false ? '30%' : '0%'}">
                <div class="stat">
                    <p class="titlte_statistique">Interactions</p>
                    <!--anciennement appelé statitstique-->

                    <div class="stat_vote_content">

                        <div class="content_list_statistics" *ngIf="showDetailListStat" id="detailStat"
                            [ngStyle]="{'margin-top': listDetailToShow==='vote' ? '-367px': listDetailToShow ==='favoris' ? '-336px' : listDetailToShow ==='vu'? '-305px' : '' }">


                            <div class="ici_le_contenu">
                                <div class="title_detail_stat_list">
                                    {{titleDetailListStat}}
                                </div>
                                <div class="la_liste">

                                    <ngx-spinner [name]="spinner_list_user" [fullScreen]="false" [type]="spinner_type"
                                        [size]="spinner_size" [bdColor]="spinner_background">
                                    </ngx-spinner>

                                    <div class="list_client_stat">
                                        <div class="nom_client_stat" title="Cliquer pour voir le detail du client">
                                            RAZAFINARIVO John Francklin
                                        </div>
                                        <div class="adress_client_stat">
                                            Antananarivo Lot A69 Anjanahary 2N
                                        </div>
                                    </div>
                                    <div class="list_client_stat">
                                        <div class="nom_client_stat" title="Cliquer pour voir le detail du client">
                                            RANDY Orton WWE Superstart
                                        </div>
                                        <div class="adress_client_stat">
                                            Chicago, Etats Unis 21K KL21000
                                        </div>
                                    </div>
                                    <div class="list_client_stat">
                                        <div class="nom_client_stat" title="Cliquer pour voir le detail du client">
                                            The Undertaker, brother of destruction WWE universe
                                        </div>
                                        <div class="adress_client_stat">
                                            Cinetière, Los angeles, great park 2351MD
                                        </div>
                                    </div>
                                    <div class="list_client_stat">
                                        <div class="nom_client_stat" title="Cliquer pour voir le detail du client">
                                            Cristiano Ronaldo CR7
                                        </div>
                                        <div class="adress_client_stat">
                                            Espaigne, madrid, santiago bernabeu
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="triangle-left"></div>


                        </div>



                        <div class="list_of_stat">
                            <div class="label_s">
                                <span class="material-icons icon_stat">
                                    grade
                                </span>
                                Votes :
                            </div>
                            <div class="info_s" title="Nombre de vote">
                                <span class="number">
                                    <!-- {{oneProduit.vote.length}} -->
                                </span>
                                <span class="material-icons icon_list"
                                    (click)="showDetailstatistic('vote','Liste client qui a voté ce produit')"
                                    title="Liste des clients qui a voté ce produit">
                                    list
                                </span>
                            </div>
                        </div>
                        <div class="list_of_stat">
                            <div class="label_s">
                                <span class="material-icons icon_stat">
                                    favorite
                                </span>
                                Favoris :
                            </div>
                            <div class="info_s" title="Nombre de favoris">
                                <span class="number">
                                    <!-- {{oneProduit.favoris.length}} -->
                                </span>
                                <span class="material-icons icon_list"
                                    (click)="showDetailstatistic('favoris','Liste client qui a favorisé ce produit')"
                                    title="Liste des clients qui a favorisé ce produit">
                                    list
                                </span>
                            </div>
                        </div>
                        <div class="list_of_stat">
                            <div class="label_s">
                                <span class="material-icons icon_stat">
                                    visibility
                                </span>
                                Vus :
                            </div>
                            <div class="info_s" title="nombre de vu">
                                <span class="number">
                                    <!-- {{oneProduit.vu}} -->
                                </span>
                                <span class="material-icons icon_list"
                                    (click)="showDetailstatistic('vu','Liste client qui a vu ce produit')"
                                    title="Liste des clients qui a vu ce produit">
                                    list
                                </span>
                            </div>
                        </div>
                        <div class="list_of_stat">
                            <div class="label_s">
                                <span class="material-icons icon_stat">
                                    shop
                                </span>
                                Commandes :
                            </div>
                            <div class="info_s" title="nombre de commande">
                                <span class="number">
                                    15
                                </span>
                                <span class="material-icons icon_list"
                                    (click)="showDetailstatistic('commande','Liste client qui a commandé ce produit')"
                                    title="Liste des clients qui a commandé ce produit">
                                    list
                                </span>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="imageCont">
                    <div class="box_image" *ngFor="let i of oneProduit.images; let in = index">
                        <span class="deleteimage_x" title="Supprimer cette image" (click)="supprimerImageProduit(i)">x</span>
                        <img src="http://localhost:3000/produits/getImage/{{i}}-hd.png" class="image_produit"
                            (click)="popupImageProduits(in);" title="clicker pour afficher l'image">
                    </div>
                    <div class="box_image" *ngIf="oneProduit.images.length!=3" (click)="file.click()">
                        <span class="material-icons add_image">
                            add
                        </span> <br>
                        Ajouter une image
                    </div>
                    <input type="file" name="" id="" hidden #file (change)="uploadFile($event.target.files)">
                </div>
            </div>
        </div>

        <div class="detail_droit">


            <h3 class="lbl_h3_detail" *ngIf="oneAndAll"> {{createType ? "Nouveau produit" : "Detail du produit"}}</h3>

            <!-- Non selection -->
            <button class="button_change_state" *ngIf="oneAndAll && !createType" (click)="launchOrArhiveOrDelete()"
                [ngStyle]="{'background-color': oneProduit.etat=='sandbox' ? '#73be00' : oneProduit.etat=='live'  ? 'orange' : oneProduit.etat=='updating'  ? 'rgb(1, 64, 107)' : 'red'}"
                [title]="oneProduit.etat == 'sandbox' ? 'Vous pouvez lancer le produit en live' : oneProduit.etat == 'live' ? 'Archiver le produit' : 'Supprimer le produit'">
                {{oneProduit.etat == 'sandbox' ? 'Lancer' : oneProduit.etat == 'live' ? 'Archiver' : oneProduit.etat == 'updating' ? 'en cours de modification' : 'Supprimer'}}
            </button>

            <div class="" *ngIf="!oneAndAll">
                <div class="etatContent">
                    <p class="title_etatContent">Selectionner l'etat du produit</p>
                    <div class="etatProduitSelect">
                        <input type="radio" id="sandbox" name="etat" value="sandbox" (change)="changeEtat($event)"
                            [checked]="state_to_change=='sandbox'" (keydown.control.a)="selectionnerTout($event)"
                            (keydown.control.d)="deselectionnerTout($event)">
                        <label class="labelEtat" for="sandbox">sandbox</label>
                    </div>

                    <div class="etatProduitSelect">
                        <input type="radio" id="live" name="etat" value="live" (change)="changeEtat($event)"
                            [checked]="state_to_change =='live'" (keydown.control.a)="selectionnerTout($event)">
                        <label class="labelEtat" for="live">live</label>
                    </div>

                    <div class="etatProduitSelect">
                        <input type="radio" id="archived" name="etat" value="archived" (change)="changeEtat($event)"
                            [checked]="state_to_change =='archived'" (keydown.control.a)="selectionnerTout($event)">
                        <label class="labelEtat" for="archived">archived</label>
                    </div>
                </div>
            </div>


            <h3 class="lbl_h3_detail" *ngIf="!oneAndAll && produitSelected.length!=0">Nombre: {{produitSelected.length}}
            </h3>

            <div *ngIf="oneAndAll">
                <div
                    [ngStyle]="{'pointer-events': (oneProduit.etat == 'sandbox' || oneProduit.etat == 'create') ? 'auto' : 'none'}">



                    <p class="dateCreationContent"> Crée le <span class="infoDate">12 Septembre 2013</span> par <span
                            class="infoDate">Rakoto</span> </p>

                    <div class="detail_to_change">
                        <input type="text" class="input_change" [(ngModel)]="oneProduit.titre" title="Editer" id="titre"
                            [ngStyle]="{'border-color': oneProduit.titre == '' ? '#d5d5d4' : '#d5d5d5'}"
                            (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                        <div class="label_change">
                            Titre
                        </div>
                    </div>
                    <div class="detail_to_change_description">
                        <textarea type="text" class="textarea_change" [(ngModel)]="oneProduit.description"
                            id="description"
                            [ngStyle]="{'border-color': oneProduit.description == '' ? '#d5d5d4' : '#d5d5d5'}"
                            placeholder="Description du produit..."></textarea>
                        <div class="label_change">
                            Description
                        </div>
                    </div>


                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change" [(ngModel)]="oneProduit.etat" id="etat" disabled
                                    style="background-color: white;"
                                    [ngStyle]="{'border-color': oneProduit.etat == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Etat
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change rightNumber" [(ngModel)]="oneProduit.marque"
                                    id="marque"
                                    [ngStyle]="{'border-color': oneProduit.marque == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Marque
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change" [(ngModel)]="oneProduit.provenance"
                                    id="provenance"
                                    [ngStyle]="{'border-color': oneProduit.provenance == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Provenance
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change rightNumber" [(ngModel)]="oneProduit.quantite"
                                    id="quantite"
                                    [ngStyle]="{'border-color': oneProduit.quantite == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Quantité en stock
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change" [(ngModel)]="oneProduit.detail_physique.couleur"
                                    id="couleur"
                                    [ngStyle]="{'border-color': oneProduit.detail_physique.couleur == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Couleur
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change rightNumber" [(ngModel)]="oneProduit.garantie"
                                    id="garantie"
                                    [ngStyle]="{'border-color': oneProduit.garantie == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Garantie
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change" [(ngModel)]="oneProduit.prix.prix_normal"
                                    id="prix_normal"
                                    [ngStyle]="{'border-color': oneProduit.prix.prix_normal == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Prix
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change rightNumber"
                                    [(ngModel)]="oneProduit.prix.prix_promotion" id="prix_promotion"
                                    [ngStyle]="{'border-color': oneProduit.prix.prix_promotion == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Prix de promotion
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change"
                                    [(ngModel)]="oneProduit.detail_fabrication.numero_model" id="numero_model"
                                    [ngStyle]="{'border-color': oneProduit.detail_fabrication.numero_model == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Numero de model
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change rightNumber"
                                    [(ngModel)]="oneProduit.detail_fabrication.date_sortie" id="date_sortie"
                                    [ngStyle]="{'border-color': oneProduit.detail_fabrication.date_sortie == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Date de sortie
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="text" class="input_change" [(ngModel)]="oneProduit.detail_physique.taille"
                                    id="taille"
                                    [ngStyle]="{'border-color': oneProduit.detail_physique.taille == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Taille
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change rightNumber"
                                    [(ngModel)]="oneProduit.detail_physique.poids" id="poids"
                                    [ngStyle]="{'border-color': oneProduit.detail_physique.poids == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Poids
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="groupe_content">
                        <div class="leftSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change"
                                    [(ngModel)]="oneProduit.detail_physique.longueur" id="longueur"
                                    [ngStyle]="{'border-color': oneProduit.detail_physique.longueur == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Longueur
                                </div>
                            </div>
                        </div>
                        <div class="rightSide sideToside">
                            <div class="detail_to_change">
                                <input type="number" class="input_change rightNumber"
                                    [(ngModel)]="oneProduit.detail_physique.largeur" id="largeur"
                                    [ngStyle]="{'border-color': oneProduit.detail_physique.largeur == '' ? '#d5d5d4' : '#d5d5d5'}"
                                    (keydown.enter)="oneProduit.etat == 'create' ? createProduct() : oneProduit.etat == 'sandbox' ? updateProduct() : false">
                                <div class="label_change">
                                    Largeur
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="detail_to_change_button">
                    <form>
                        <button class="btn_modifier" *ngIf="!createType" mat-button (click)="updateProduct()"
                            [ngStyle]="{'pointer-events': oneProduit.etat != 'sandbox' ? 'none' : 'auto'}">
                            Modifier
                        </button>
                        <button class="btn_supprimer" *ngIf="!createType" (click)="deleteOrArchivedProduct()">
                            {{oneProduit.etat == 'live' ? 'Archiver' : 'Supprimer'}}
                        </button>
                        <button class="btn_modifier" *ngIf="createType" (click)="createProduct()">
                            Créer
                        </button>
                        <button class="btn_modifier" *ngIf="createType" (click)="cancelCreate()">
                            Annuler
                        </button>
                    </form>
                </div>

            </div>

            <div *ngIf="!oneAndAll">
                <div style="height: 500px; overflow-y: scroll; padding-right: 10px;">
                    <div class="element_un_selected" *ngFor="let p of produitSelected" title="{{p.description}}">
                        <img src="../../../../assets/images/your-logo-png-8.png" width="50px" alt=""> {{p.titre}}
                        <span class="material-icons icon_remove_ticket" (click)="removeFromProduitSelected(p)"
                            title="Enlever le produit">
                            remove_circle_outline
                        </span>
                    </div>
                </div>

                <button class="btn_suppr_selectionne" *ngIf="produitSelected.length!=0"
                    (click)="launchOrArhiveOrDelete_Multiple()">
                    {{state_to_change == 'live' ? 'Archiver les selectionnés' : state_to_change == 'sandbox' ? 'Lancer les selectionnés' : 'Supprimer les selectionnés'}}
                </button>

            </div>


        </div>

    </div>
</div>


<ng-template #imageProduit>
    <button *ngIf="indexImage > 0 " (click)="showPreviewImage()" class="previewButtonImage">Précédant</button>
    <img *ngIf="oneProduit.images.length  > 0"
        src="http://localhost:3000/produits/getImage/{{oneProduit.images[indexImage]}}-hd.png"
        class="animate__animated animate__fadeIn">
    <button class="btnSupprimerImage" (click)="supprimerImageProduit(oneProduit.images[indexImage])">
        Supprimer
    </button>
    <button *ngIf="indexImage != oneProduit.images.length-1" (click)="showNextImage()"
        class="nextButtonImage">Suivant</button>

</ng-template>



<ng-template #dialogBox *ngIf="oneAndAll">
    <div class="contenuModal" *ngIf="isProduitElement == true">
        {{oneProduit.etat == 'sandbox' ? ' voulez-vous lancer' : oneProduit.etat == 'live' ? 'voulez-vous archiver' : oneProduit.etat == 'create' ? 'voulez-vous créer' : oneProduit.etat == 'updating' ? 'voulez-vous modifier' : oneProduit.etat == 'deleting' ? 'voulez-vous supprimer' : 'voulez-vous Supprimer'}}
        le produit <label style="color:blue">"{{oneProduit.titre}}"</label> ? <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm" id="button_confirm_one"
                [ngStyle]="{'background-color': oneProduit.etat=='sandbox' ? '#73be00' : oneProduit.etat=='live'  ? 'orange' : oneProduit.etat == 'create' ? 'rgb(1 64 107)' : oneProduit.etat == 'updating' ? 'rgb(1 64 107)' : 'red'}"
                (keydown.ArrowRight)="deplacerCancel()">
                {{oneProduit.etat == 'sandbox' ? 'Lancer' : oneProduit.etat == 'live' ? 'Archiver' : oneProduit.etat == 'create' ? 'Créer' : oneProduit.etat == 'updating' ? 'Modifier'  : 'Supprimer'}}
            </button>
            <button [mat-dialog-close]=false class="button_dialog_cancel" id="button_cancel_one"
                (keydown.ArrowLeft)="deplacerConfirme()">
                Annuler
            </button>
        </div>
    </div>

    <div class="contenuModal" *ngIf="isProduitElement == false">
       <label>voulez-vous supprimer cette image ?</label> <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm btn_supprimer_dialog">
                Supprimer
            </button>
            <button [mat-dialog-close]=false class="button_dialog_cancel">Annuler</button>
        </div>
    </div>


</ng-template>

<ng-template #categorieBox>
    <div class="contenuModal">
        Voullez-vous ajouter la catégorie 
        <label style="color:blue">{{categorie.nom}}</label>
        <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm">OK</button>
            <button [mat-dialog-close]=false class="button_dialog_cancel">Annuler</button>
        </div>
    </div>
</ng-template>

<ng-template #categorieBoxEdit>
    <div class="contenuModal">
        Voullez-vous modifier la catégorie 
        <label style="color:green">{{categorie.nom}}</label>
        <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm" style="background-color:blue;">Modifier</button>
            <button [mat-dialog-close]=false class="button_dialog_cancel">Annuler</button>
        </div>
    </div>
</ng-template>

<ng-template #categorieBoxDelete>
    <div class="contenuModal">
        Voullez-vous supprimer la catégorie 
        <label style="color:red">{{categorie.nom}}</label>
        <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm" style="background-color:red;">Supprimer</button>
            <button [mat-dialog-close]=false class="button_dialog_cancel">Annuler</button>
        </div>
    </div>
</ng-template>


<ng-template #dialogBox *ngIf="!oneAndAll">
    <div class="contenuModal">
        {{state_to_change == 'sandbox' ? ' voulez-vous lancer' : state_to_change == 'live' ? 'voulez-vous archiver' : 'voulez-vous Supprimer'}}
        <label style="color:blue">{{produitSelected.length}} produit(s) </label> selectionnés ? <br>
        <div style="float: right;">
            <button [mat-dialog-close]=true class="button_dialog_confirm"
                [ngStyle]="{'background-color': state_to_change=='sandbox' ? '#73be00' : state_to_change=='live'  ? 'orange' : 'red'}">
                {{state_to_change == 'sandbox' ? 'Lancer' : state_to_change == 'live' ? 'Archiver' : 'Supprimer'}}
            </button>
            <button [mat-dialog-close]=false class="button_dialog_cancel">Annuler</button>
        </div>
    </div>
</ng-template>


<div style="visibility: hidden; position: fixed" [style.left]="contextMenuPosition.x"
    [style.top]="contextMenuPosition.y" [matMenuTriggerFor]="contextMenu">
    <mat-menu #contextMenu="matMenu">
        <ng-template matMenuContent *ngIf="allProduitsSelected.length == 0">
            <button class="itemContextuel" (click)="launchOrArhiveOrDelete()">
                {{oneProduit.etat == 'sandbox' ? 'Lancer' : oneProduit.etat == 'live' ? 'Archiver' : 'Supprimer'}}
            </button>
            <hr style="margin:'0px'">
            <button class="itemContextuel" (click)="file.click()"
                *ngIf="(oneProduit.etat == 'sandbox' || oneProduit.etat == 'live') && oneProduit.images.length != 3">
                Ajouter image
            </button>
            <hr style="margin:'0px'">
            <button class="itemContextuel" (click)="dupliquerProduit()">
                Dupliquer
            </button>
            <hr style="margin:'0px'">
            <button class="itemContextuel" *ngIf="oneProduit.etat == ('sandbox' || 'archived')" (click)="deleteProduct()">
                Supprimer
            </button>
        </ng-template>

        <ng-template matMenuContent *ngIf="allProduitsSelected.length > 0">
            <button class="itemContextuel" (click)="dupliquerMultiple()">
                Dupliquer tous
            </button>
            <button class="itemContextuel">
                Supprimer tous
            </button>
        </ng-template>

    </mat-menu>
</div>

<div class="transparant_overlay" *ngIf="Transparent_overlay" (click)="hideOverlay()">
</div>